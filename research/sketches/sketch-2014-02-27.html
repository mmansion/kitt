<!DOCTYPE html>
<html>
<head>
<title>paperjs sketch</title>
</head>
<style>
body {
  font-family: arial;
  color: gray;
}
#cpanel {
  position: fixed;
  top: 0;
  right: 0;
  width: 30px;
  height: 100%;
  background: rgba(0,2,190,.1);
  border-left: thin darkgray dashed;
  -webkit-transition: all .2s;
}
#cpanel:hover {
  width: 300px;
}
</style>
<body>
<h5>Conversation Table Sketch<br>Feb, 2014</h5>
<canvas id="sketch" resize></canvas>
<nav id="cpanel"></nav>
<script type="text/javascript" src="../bower_components/paper/dist/paper.js"></script>
<script type="text/paperscript" canvas="sketch" keepalive="false" resize="true">

var numLights = 50;
var gridSpace = 20;
var margin = 10;

var totalRows = 25;
var totalCols = 25;

var lights = [];


var svg;

project.importSVG('data/table.svg', function(item) {
  svg = item;
  svg.fillColor = 'lightgray';
  svg.scale(.5);
  svg.position = new Point(300, 300);
  drawGrid();
});


function drawGrid() {
  for(var row = 0; row < totalRows; row++) {
    for(var col = 0; col < totalCols; col++) {
      var point = new Point( row * gridSpace + 100, col * gridSpace + 100);
      if(svg.contains(point)) {
        lights.push(addLight(point, 5, 8));
      }
    }
  }
  svg.scale(1.1);
}

function addLight(center, radius, points) {
  var circle = new Path({
    fillColor:'white',
    strokeColor: 'black',
    closed: true
  });
  
  for (var i = 0; i < points; i++) {
    var delta = new Point({
      length: radius,
      angle: (360 / points) * i
    });
    circle.add(center + delta);
  }
  circle.smooth();

  return circle;
}


function onMouseMove(event) {
  //on mouse move
}

function onMouseDown(event) {
  // If the position of the mouse is within the path,
  // set its fill color to red, otherwise set it to
  // black:

  // if (svg.contains(event.point)) {
  //   svg.fillColor = 'red';
  // } else {
  //   svg.fillColor = 'black';
  // }
  //on mouse down
}

function onMouseUp(event) {
  //on mouse up
}
</script>
</body>
</html>